# Sahatak Telemedicine Platform v1.0.0

A comprehensive telemedicine platform with bilingual support (Arabic/English) featuring a modern responsive frontend and robust backend API for healthcare consultations.

## Platform Overview

Sahatak is a full-stack telemedicine platform that enables secure doctor-patient consultations with complete bilingual support. The platform consists of a responsive frontend built with HTML/CSS/JavaScript and Bootstrap, integrated with a Flask-powered backend API.

---

## Frontend Application

### Frontend Features
- **Bilingual Interface**: Complete Arabic and English language support with RTL/LTR layouts
- **Responsive Design**: Mobile-first design using Bootstrap 5 with Arabic font support
- **User Authentication Flow**: Complete registration and login system for patients and doctors
- **Dashboard System**: Separate dashboards for patients and doctors with role-specific features
- **Translation Management**: JSON-based localization system with fallback support
- **Medical Theme**: Healthcare-focused UI with medical color schemes
- **Accessibility**: ARIA labels, keyboard navigation, and screen reader support
- **Progressive Enhancement**: Graceful degradation with fallback functionality

### Frontend Structure

```
frontend/
├── index.html                    # Main entry point with authentication flow
├── package.json                  # Frontend dependencies and scripts
├── assets/
│   ├── css/
│   │   ├── main.css             # Main stylesheet with Arabic/English support
│   │   └── components/
│   │       └── dashboard.css    # Dashboard-specific styling
│   ├── js/
│   │   ├── main.js              # Core JavaScript with language management
│   │   └── components/
│   │       ├── dashboard-translations.js  # Dashboard translations
│   │       ├── appointment-booking.js     # Appointment system
│   │       ├── audio-recorder.js          # Voice recording features
│   │       ├── symptom-assessment.js      # Health assessment forms
│   │       ├── validation.js              # Form validation
│   │       └── date-utils.js             # Date/time utilities
│   ├── images/
│   │   └── logo/                # Platform branding
│   └── fonts/
│       └── noto-sans-arabic/    # Arabic font files
├── locales/
│   ├── ar.json                  # Arabic translations
│   └── en.json                  # English translations
└── pages/
    ├── dashboard/
    │   ├── patient.html         # Patient dashboard
    │   └── doctor.html          # Doctor dashboard
    ├── appointments/
    │   ├── appointment-list.html    # Appointment management
    │   ├── book-appointment.html    # Appointment booking
    │   └── video-consultation.html  # Video call interface
    ├── medical/
    │   ├── medical-records.html     # Medical history
    │   └── symptom-assessment.html  # Health assessment
    ├── profile/
    │   ├── patient.html         # Patient profile management
    │   └── doctor.html          # Doctor profile management
    └── common/
        ├── about.html           # About page
        ├── contact-us.html      # Contact information
        ├── services.html        # Services overview
        └── support.html         # Help and support
```

### Frontend Technologies
- **HTML5**: Semantic markup with accessibility features
- **CSS3**: Modern styling with CSS Grid, Flexbox, and CSS variables
- **JavaScript (ES6+)**: Modern JavaScript with modules and async/await
- **Bootstrap 5**: Responsive UI framework with Arabic RTL support
- **Noto Sans Arabic**: Professional Arabic typography
- **Bootstrap Icons**: Comprehensive icon library

### Language Management System

The frontend includes a sophisticated language management system:

```javascript
// Language switching
selectLanguage('ar')  // Switch to Arabic with RTL layout
selectLanguage('en')  // Switch to English with LTR layout

// Translation loading with fallback
LanguageManager.loadTranslations()  // Load from JSON files
LanguageManager.getTranslation('ar', 'welcome.title')  // Get specific translation

// Automatic layout switching
document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr')
document.documentElement.setAttribute('lang', lang)
```

### User Experience Flow
1. **Language Selection**: First-time visitors choose Arabic or English
2. **Authentication Choice**: Login or register decision
3. **User Type Selection**: Patient or doctor account type
4. **Registration**: Complete profile setup with real-time validation
5. **Dashboard Access**: Role-specific dashboard with medical features
6. **Profile Management**: Update information and language preferences

### Responsive Design Features
- **Mobile-First**: Optimized for smartphones and tablets
- **Touch-Friendly**: Large buttons and touch targets
- **Cross-Browser**: Compatible with modern browsers
- **Performance**: Optimized loading and smooth animations
- **Offline Fallback**: Graceful handling of network issues

### Key Frontend Components

#### Authentication Flow
- **Language Selection Screen**: Beautiful gradient background with language options
- **Login/Register Forms**: Comprehensive validation with error handling
- **User Type Selection**: Visual cards for patient/doctor selection
- **Password Strength**: Real-time password validation feedback

#### Dashboard Features
- **Patient Dashboard**: Health summary, appointments, quick actions
- **Doctor Dashboard**: Schedule management, patient overview, statistics
- **Navigation**: Intuitive sidebar with role-based menu items
- **Profile Management**: Complete profile editing with validation

#### Medical Features
- **Appointment Booking**: Calendar integration with time slot selection
- **Symptom Assessment**: Interactive health questionnaire
- **Medical Records**: Secure viewing of health history
- **Video Consultation**: Integrated video call interface

### Frontend Setup

```bash
# Navigate to project root
cd /path/to/Sahatak

# Start development server (Python)
cd frontend
python -m http.server 8000

# Or use Node.js if preferred
npm start
```

The frontend will be available at `http://localhost:8000`

---

## Backend API

### Backend Features
- **User Management**: Registration, authentication, and profile management
- **Bilingual Support**: Full Arabic and English language support in API responses
- **Role-Based Access**: Separate patient and doctor user types with permissions
- **Medical Profiles**: Detailed patient and doctor profile management
- **Appointment System**: Complete appointment booking and management system
- **Health Assessments**: AI-powered health assessment framework

### Production-Ready Infrastructure
- **Standardized API Responses**: Consistent JSON response format across all endpoints
- **Comprehensive Error Handling**: Global error handlers with detailed logging
- **Health Monitoring**: Multiple health check endpoints with system metrics
- **Structured Logging**: JSON-formatted logs with request tracking and audit trails
- **CORS Configuration**: Proper cross-origin resource sharing for frontend integration
- **Input Validation**: Robust validation for all user inputs with Arabic text support
- **Security**: Password hashing, input sanitization, and SQL injection protection

## Backend Structure

```
backend/
├── app.py                      # Main Flask application
├── config.py                   # Configuration management
├── models.py                   # Database models
├── requirements.txt            # Python dependencies
├── .env.example               # Environment variables template
├── logs/                      # Application logs (auto-created)
│   ├── sahatak_app.log       # General application logs
│   ├── sahatak_errors.log    # Error logs
│   └── sahatak_auth.log      # Authentication logs
├── routes/                    # API route blueprints
│   ├── auth.py               # Authentication endpoints
│   ├── users.py              # User management endpoints
│   ├── appointments.py       # Appointment management
│   ├── medical.py            # Medical records
│   └── ai_assessment.py      # AI health assessments
└── utils/                     # Utility modules
    ├── responses.py          # Standardized API responses
    ├── error_handlers.py     # Global error handling
    ├── logging_config.py     # Logging configuration
    ├── health_check.py       # Health monitoring
    └── validators.py         # Input validation
```

## Setup Instructions

### Prerequisites
- Python 3.8+
- pip package manager

### 1. Install Dependencies
```bash
cd backend
pip install -r requirements.txt
```

### 2. Environment Configuration
```bash
# Copy environment template
cp .env.example .env

# Edit the .env file with your configuration
```

**Required Environment Variables:**
```env
# Flask Configuration
SECRET_KEY=your-secret-key-here
FLASK_ENV=development
DATABASE_URL=sqlite:///sahatak_dev.db

# Mail Configuration (Optional)
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password

# SMS Configuration (Optional)
SMS_USERNAME=sandbox
SMS_API_KEY=your-sms-api-key
SMS_SENDER_ID=SAHATAK
```

### 3. Run the Application
```bash
python app.py
```

The API will start at `http://localhost:5000`

## API Endpoints

### Authentication (`/api/auth`)
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/register` | Register new user (patient/doctor) |
| POST | `/login` | User login |
| POST | `/logout` | User logout |
| GET | `/me` | Get current user info |
| POST | `/change-password` | Change password |
| POST | `/update-language` | Update language preference |

### 👤 User Management (`/api/users`)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/profile` | Get user profile |
| PUT | `/profile` | Update user profile |
| GET | `/doctors` | List verified doctors |
| GET | `/doctors/{id}` | Get doctor details |
| GET | `/specialties` | Get medical specialties |
| POST | `/deactivate` | Deactivate account |

### Appointments (`/api/appointments`)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/` | Get user appointments |
| POST | `/` | Create new appointment |
| GET | `/{id}` | Get appointment details |

### Medical (`/api/medical`)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/records` | Get medical records |
| GET | `/prescriptions` | Get prescriptions |

### AI Assessment (`/api/ai`)
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/assessment` | AI health assessment |

### Health Monitoring
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/health` | Basic health check |
| GET | `/health/detailed` | Comprehensive health status |
| GET | `/health/database` | Database health check |

## API Response Format

All API responses follow a standardized format:

### Success Response
```json
{
    "success": true,
    "message": "Operation successful",
    "timestamp": "2025-01-31T10:30:00Z",
    "status_code": 200,
    "data": {
        // Response data here
    },
    "meta": {
        // Optional metadata (pagination, etc.)
    }
}
```

### Error Response
```json
{
    "success": false,
    "message": "Error description",
    "timestamp": "2025-01-31T10:30:00Z",
    "status_code": 400,
    "error_code": "VALIDATION_ERROR",
    "field": "email",
    "details": {
        // Additional error details
    }
}
```

## Authentication

The API uses session-based authentication with Flask-Login. After successful login, users receive a session cookie that must be included in subsequent requests.

### Registration Examples

**Patient Registration:**
```json
POST /api/auth/register
{
    "email": "patient@example.com",
    "password": "securepass123",
    "first_name": "أحمد",
    "last_name": "محمد",
    "user_type": "patient",
    "language_preference": "ar",
    "phone": "+249123456789",
    "age": 30,
    "gender": "male"
}
```

**Doctor Registration:**
```json
POST /api/auth/register
{
    "email": "doctor@example.com",
    "password": "securepass123",
    "first_name": "Dr. Sarah",
    "last_name": "Ahmed",
    "user_type": "doctor",
    "language_preference": "en",
    "phone": "+249987654321",
    "license_number": "MD12345",
    "specialty": "cardiology",
    "years_of_experience": 10
}
```

## Database Schema

### Users Table
- `id` - Primary key
- `email` - Unique email address
- `password_hash` - Hashed password
- `first_name`, `last_name` - User names
- `user_type` - 'patient' or 'doctor'
- `language_preference` - 'ar' or 'en'
- `is_active`, `is_verified` - Status flags
- Timestamps and audit fields

### Patients Table
- Links to Users table
- Medical information (age, gender, blood type)
- Medical history, allergies, medications
- Emergency contact information

### Doctors Table
- Links to Users table
- Professional information (license, specialty, experience)
- Verification status and ratings
- Consultation fees and availability

### Appointments Table
- Links to Patients and Doctors
- Appointment details (date, type, status)
- Medical notes and prescriptions
- Payment information

## Error Handling

The API includes comprehensive error handling:

- **Validation Errors**: Input validation with field-specific messages
- **Authentication Errors**: Login/permission issues
- **Database Errors**: Automatic rollback and logging
- **System Errors**: Graceful handling with error IDs for tracking

## Logging & Monitoring

### Log Files
- `sahatak_app.log` - General application logs
- `sahatak_errors.log` - Error-specific logs
- `sahatak_auth.log` - Authentication events

### Health Checks
- System resource monitoring (CPU, memory, disk)
- Database connectivity tests
- External service status
- Application metrics and uptime

## Development

### Running Tests
```bash
# Install test dependencies
pip install pytest pytest-cov

# Run tests
python -m pytest tests/
```

### Code Style
```bash
# Install development dependencies
pip install black flake8

# Format code
black .

# Check code style
flake8 .
```

## Production Deployment

### Environment Setup
1. Set `FLASK_ENV=production`
2. Use PostgreSQL for the database
3. Configure proper mail server
4. Set up SSL/TLS certificates
5. Use a production WSGI server (Gunicorn)

### Docker Deployment
```dockerfile
FROM python:3.9-slim
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD ["gunicorn", "--bind", "0.0.0.0:5000", "app:app"]
```

## Support

For issues and questions:
- Check the logs in the `logs/` directory
- Use the health check endpoints to diagnose problems
- Review the comprehensive error messages in API responses

## Version History

- **v1.0.0** - Initial release with full user management, authentication, and health monitoring
