<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>صحتك | Sahatak</title>
    
    <!-- Bootstrap 5 CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <!-- Arabic Font - Noto Sans Arabic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Main CSS -->
    <link rel="stylesheet" href="frontend/assets/css/main.css">
</head>
<body>
    <!-- Language Selection Section - This will be the first feature to implement -->
    <div id="language-selection" class="min-vh-100 d-flex align-items-center justify-content-center" role="main">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card shadow-lg border-0">
                        <div class="card-body text-center p-5">
                            <h1 class="mb-4" role="banner">صحتك | Sahatak</h1>
                            <p class="lead mb-4" aria-describedby="language-instructions">Choose your preferred language / اختر اللغة المفضلة</p>
                            <div id="language-instructions" class="visually-hidden">Select your preferred language to continue to the platform</div>
                            
                            <div class="d-grid gap-3" role="group" aria-labelledby="language-instructions">
                                <button class="btn btn-primary btn-lg" 
                                        onclick="selectLanguage('ar')" 
                                        aria-label="اختر العربية كلغة مفضلة - Choose Arabic as preferred language"
                                        data-lang="ar">
                                    <i class="bi bi-globe me-2" aria-hidden="true"></i>
                                    العربية
                                </button>
                                <button class="btn btn-outline-primary btn-lg" 
                                        onclick="selectLanguage('en')" 
                                        aria-label="Choose English as preferred language - اختر الإنجليزية كلغة مفضلة"
                                        data-lang="en">
                                    <i class="bi bi-globe me-2" aria-hidden="true"></i>
                                    English
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login/Register Selection (Hidden initially) -->
    <div id="auth-selection" class="d-none min-vh-100 d-flex align-items-center justify-content-center" style="display: none !important;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <!-- Welcome Header -->
                    <div class="text-center mb-4">
                        <h1 class="welcome-title mb-3">
                            <i class="bi bi-heart-pulse me-2 text-primary"></i>
                            <span id="welcome-text">مرحباً بك في منصة صحتك للطب عن بُعد</span>
                        </h1>
                        <p class="lead" id="welcome-description" style="color: var(--light-color);">
                            منصة آمنة وسهلة الاستخدام للتواصل مع الأطباء
                        </p>
                    </div>
                    
                    <!-- Auth Selection Card -->
                    <div class="card shadow-lg border-0">
                        <div class="card-body text-center p-5">
                            <h3 class="mb-4" id="auth-prompt">ابدأ رحلتك الصحية</h3>
                            
                            <div class="d-grid gap-3">
                                <button class="btn btn-primary btn-lg auth-btn" onclick="showLogin()">
                                    <i class="bi bi-box-arrow-in-right me-2"></i>
                                    <span id="login-text">تسجيل الدخول</span>
                                </button>
                                <button class="btn btn-outline-primary btn-lg auth-btn" onclick="showUserTypeSelection()">
                                    <i class="bi bi-person-plus me-2"></i>
                                    <span id="register-text">إنشاء حساب جديد</span>
                                </button>
                            </div>
                            
                            <!-- Language Switcher -->
                            <div class="mt-4 pt-3 border-top">
                                <small class="text-muted d-block mb-2" id="language-switch-text">تغيير اللغة</small>
                                <button class="btn btn-sm btn-outline-secondary" onclick="showLanguageSelection()">
                                    <i class="bi bi-globe2 me-1"></i>
                                    <span id="current-language">العربية</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Type Selection (Hidden initially) -->
    <div id="user-type-selection" class="d-none min-vh-100 d-flex align-items-center justify-content-center" style="display: none !important;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card shadow-lg border-0">
                        <div class="card-body text-center p-5">
                            <h2 class="mb-4" id="user-type-title">اختر نوع حسابك</h2>
                            <p class="lead mb-4" id="user-type-subtitle">اختر النوع المناسب لحسابك لنقدم لك التجربة الأمثل</p>
                            
                            <div class="d-grid gap-3">
                                <button class="btn btn-primary btn-lg user-type-btn" onclick="selectUserType('patient')">
                                    <i class="bi bi-person me-2"></i>
                                    <div class="text-start">
                                        <div class="fw-bold" id="patient-title">مريض</div>
                                        <small class="opacity-75" id="patient-desc">أبحث عن استشارة طبية أو متابعة حالتي الصحية</small>
                                    </div>
                                </button>
                                <button class="btn btn-outline-primary btn-lg user-type-btn" onclick="selectUserType('doctor')">
                                    <i class="bi bi-person-badge me-2"></i>
                                    <div class="text-start">
                                        <div class="fw-bold" id="doctor-title">طبيب</div>
                                        <small class="opacity-75" id="doctor-desc">أريد تقديم الاستشارات الطبية للمرضى</small>
                                    </div>
                                </button>
                            </div>
                            
                            <div class="text-center mt-4">
                                <button class="btn btn-link" onclick="showAuthSelection()" id="back-to-auth-type">
                                    <i class="bi bi-arrow-left me-1"></i>
                                    العودة
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Form (Hidden initially) -->
    <div id="login-form" class="d-none min-vh-100 d-flex align-items-center justify-content-center" style="display: none !important;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-5">
                    <div class="card shadow-lg border-0">
                        <div class="card-body p-5">
                            <div class="text-center mb-4">
                                <h2 id="login-title">تسجيل الدخول</h2>
                                <p class="text-muted" id="login-subtitle">أدخل بياناتك للوصول إلى حسابك</p>
                            </div>
                            
                            <form id="loginForm" onsubmit="handleLogin(event)">
                                <div class="mb-3">
                                    <label for="email" class="form-label" id="email-label">البريد الإلكتروني</label>
                                    <input type="email" class="form-control" id="email" required>
                                    <div class="invalid-feedback" id="email-error"></div>
                                </div>
                                <div class="mb-3">
                                    <label for="password" class="form-label" id="password-label">كلمة المرور</label>
                                    <input type="password" class="form-control" id="password" required>
                                    <div class="invalid-feedback" id="password-error"></div>
                                </div>
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-primary btn-lg" id="login-submit">
                                        <span class="spinner-border spinner-border-sm me-2 d-none" id="login-spinner"></span>
                                        <i class="bi bi-box-arrow-in-right me-2" id="login-icon"></i>
                                        <span id="login-text-btn">دخول</span>
                                    </button>
                                </div>
                                <div class="alert alert-danger mt-3 d-none" id="login-error-alert"></div>
                            </form>
                            
                            <div class="text-center mt-4">
                                <button class="btn btn-link" onclick="showAuthSelection()" id="back-to-auth">
                                    <i class="bi bi-arrow-left me-1"></i>
                                    العودة
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Form (Hidden initially) -->
    <div id="register-form" class="d-none min-vh-100 d-flex align-items-center justify-content-center">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card shadow-lg border-0">
                        <div class="card-body p-5">
                            <div class="text-center mb-4">
                                <h2 id="register-title">إنشاء حساب جديد</h2>
                                <p class="text-muted" id="register-subtitle">انضم إلى منصة صحتك اليوم</p>
                            </div>
                            
                            <form id="registerForm" onsubmit="handleRegister(event)">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="firstName" class="form-label" id="firstName-label">الاسم الأول</label>
                                        <input type="text" class="form-control" id="firstName" required>
                                        <div class="invalid-feedback" id="firstName-error"></div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="lastName" class="form-label" id="lastName-label">الاسم الأخير</label>
                                        <input type="text" class="form-control" id="lastName" required>
                                        <div class="invalid-feedback" id="lastName-error"></div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="regEmail" class="form-label" id="regEmail-label">البريد الإلكتروني</label>
                                    <input type="email" class="form-control" id="regEmail" required>
                                    <div class="invalid-feedback" id="regEmail-error"></div>
                                </div>
                                <div class="mb-3">
                                    <label for="regPassword" class="form-label" id="regPassword-label">كलمة المرور</label>
                                    <input type="password" class="form-control" id="regPassword" required minlength="6">
                                    <div class="invalid-feedback" id="regPassword-error"></div>
                                    <div class="form-text" id="password-help">كلمة المرور يجب أن تكون 6 أحرف على الأقل</div>
                                </div>
                                <div class="mb-3">
                                    <label for="userType" class="form-label" id="userType-label">نوع الحساب</label>
                                    <select class="form-select" id="userType" required>
                                        <option value="">اختر نوع الحساب</option>
                                        <option value="patient">مريض</option>
                                        <option value="doctor">طبيب</option>
                                    </select>
                                    <div class="invalid-feedback" id="userType-error"></div>
                                </div>
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-primary btn-lg" id="register-submit">
                                        <span class="spinner-border spinner-border-sm me-2 d-none" id="register-spinner"></span>
                                        <i class="bi bi-person-plus me-2" id="register-icon"></i>
                                        <span id="register-text-btn">إنشاء الحساب</span>
                                    </button>
                                </div>
                                <div class="alert alert-danger mt-3 d-none" id="register-error-alert"></div>
                                <div class="alert alert-success mt-3 d-none" id="register-success-alert"></div>
                            </form>
                            
                            <div class="text-center mt-4">
                                <button class="btn btn-link" onclick="showAuthSelection()" id="back-to-auth-reg">
                                    <i class="bi bi-arrow-left me-1"></i>
                                    العودة
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Patient Registration Form (Hidden initially) -->
    <div id="patient-register-form" class="d-none min-vh-100 d-flex align-items-center justify-content-center" style="display: none !important;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card shadow-lg border-0">
                        <div class="card-body p-5">
                            <div class="text-center mb-4">
                                <h2 id="patient-register-title">إنشاء حساب مريض</h2>
                                <p class="text-muted" id="patient-register-subtitle">انضم إلى منصة صحتك كمريض</p>
                            </div>
                            
                            <form id="patientRegisterForm" onsubmit="handlePatientRegister(event)">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="patientFirstName" class="form-label" id="patient-firstName-label">الاسم الأول</label>
                                        <input type="text" class="form-control" id="patientFirstName" required>
                                        <div class="invalid-feedback" id="patientFirstName-error"></div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="patientLastName" class="form-label" id="patient-lastName-label">الاسم الأخير</label>
                                        <input type="text" class="form-control" id="patientLastName" required>
                                        <div class="invalid-feedback" id="patientLastName-error"></div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="patientEmail" class="form-label" id="patient-email-label">البريد الإلكتروني</label>
                                    <input type="email" class="form-control" id="patientEmail" required>
                                    <div class="invalid-feedback" id="patientEmail-error"></div>
                                </div>
                                <div class="mb-3">
                                    <label for="patientPhone" class="form-label" id="patient-phone-label">رقم الهاتف</label>
                                    <input type="tel" class="form-control" id="patientPhone" required>
                                    <div class="invalid-feedback" id="patientPhone-error"></div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="patientAge" class="form-label" id="patient-age-label">العمر</label>
                                        <input type="number" class="form-control" id="patientAge" min="1" max="120" required>
                                        <div class="invalid-feedback" id="patientAge-error"></div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="patientGender" class="form-label" id="patient-gender-label">الجنس</label>
                                        <select class="form-select" id="patientGender" required>
                                            <option value="">اختر الجنس</option>
                                            <option value="male">ذكر</option>
                                            <option value="female">أنثى</option>
                                        </select>
                                        <div class="invalid-feedback" id="patientGender-error"></div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="patientPassword" class="form-label" id="patient-password-label">كلمة المرور</label>
                                    <input type="password" class="form-control" id="patientPassword" required minlength="6">
                                    <div class="invalid-feedback" id="patientPassword-error"></div>
                                    <div class="form-text" id="patient-password-help">كلمة المرور يجب أن تكون 6 أحرف على الأقل</div>
                                </div>
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-primary btn-lg" id="patient-register-submit">
                                        <span class="spinner-border spinner-border-sm me-2 d-none" id="patient-register-spinner"></span>
                                        <i class="bi bi-person-plus me-2" id="patient-register-icon"></i>
                                        <span id="patient-register-text-btn">إنشاء حساب المريض</span>
                                    </button>
                                </div>
                                <div class="alert alert-danger mt-3 d-none" id="patient-register-error-alert"></div>
                                <div class="alert alert-success mt-3 d-none" id="patient-register-success-alert"></div>
                            </form>
                            
                            <div class="text-center mt-4">
                                <button class="btn btn-link" onclick="showUserTypeSelection()" id="back-to-user-type-patient">
                                    <i class="bi bi-arrow-left me-1"></i>
                                    العودة
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Doctor Registration Form (Hidden initially) -->
    <div id="doctor-register-form" class="d-none min-vh-100 d-flex align-items-center justify-content-center" style="display: none !important;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-7">
                    <div class="card shadow-lg border-0">
                        <div class="card-body p-5">
                            <div class="text-center mb-4">
                                <h2 id="doctor-register-title">إنشاء حساب طبيب</h2>
                                <p class="text-muted" id="doctor-register-subtitle">انضم إلى منصة صحتك كطبيب</p>
                            </div>
                            
                            <form id="doctorRegisterForm" onsubmit="handleDoctorRegister(event)">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="doctorFirstName" class="form-label" id="doctor-firstName-label">الاسم الأول</label>
                                        <input type="text" class="form-control" id="doctorFirstName" required>
                                        <div class="invalid-feedback" id="doctorFirstName-error"></div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="doctorLastName" class="form-label" id="doctor-lastName-label">الاسم الأخير</label>
                                        <input type="text" class="form-control" id="doctorLastName" required>
                                        <div class="invalid-feedback" id="doctorLastName-error"></div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="doctorEmail" class="form-label" id="doctor-email-label">البريد الإلكتروني</label>
                                    <input type="email" class="form-control" id="doctorEmail" required>
                                    <div class="invalid-feedback" id="doctorEmail-error"></div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="doctorPhone" class="form-label" id="doctor-phone-label">رقم الهاتف</label>
                                        <input type="tel" class="form-control" id="doctorPhone" required>
                                        <div class="invalid-feedback" id="doctorPhone-error"></div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="doctorLicense" class="form-label" id="doctor-license-label">رقم الترخيص الطبي</label>
                                        <input type="text" class="form-control" id="doctorLicense" required>
                                        <div class="invalid-feedback" id="doctorLicense-error"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="doctorSpecialty" class="form-label" id="doctor-specialty-label">التخصص</label>
                                        <select class="form-select" id="doctorSpecialty" required>
                                            <option value="">اختر التخصص</option>
                                            <option value="cardiology">أمراض القلب</option>
                                            <option value="pediatrics">طب الأطفال</option>
                                            <option value="dermatology">الأمراض الجلدية</option>
                                            <option value="internal">الطب الباطني</option>
                                            <option value="psychiatry">الطب النفسي</option>
                                            <option value="orthopedics">العظام</option>
                                            <option value="general">طب عام</option>
                                        </select>
                                        <div class="invalid-feedback" id="doctorSpecialty-error"></div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="doctorExperience" class="form-label" id="doctor-experience-label">سنوات الخبرة</label>
                                        <input type="number" class="form-control" id="doctorExperience" min="0" max="50" required>
                                        <div class="invalid-feedback" id="doctorExperience-error"></div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="doctorPassword" class="form-label" id="doctor-password-label">كلمة المرور</label>
                                    <input type="password" class="form-control" id="doctorPassword" required minlength="6">
                                    <div class="invalid-feedback" id="doctorPassword-error"></div>
                                    <div class="form-text" id="doctor-password-help">كلمة المرور يجب أن تكون 6 أحرف على الأقل</div>
                                </div>
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-primary btn-lg" id="doctor-register-submit">
                                        <span class="spinner-border spinner-border-sm me-2 d-none" id="doctor-register-spinner"></span>
                                        <i class="bi bi-person-badge me-2" id="doctor-register-icon"></i>
                                        <span id="doctor-register-text-btn">إنشاء حساب الطبيب</span>
                                    </button>
                                </div>
                                <div class="alert alert-danger mt-3 d-none" id="doctor-register-error-alert"></div>
                                <div class="alert alert-success mt-3 d-none" id="doctor-register-success-alert"></div>
                            </form>
                            
                            <div class="text-center mt-4">
                                <button class="btn btn-link" onclick="showUserTypeSelection()" id="back-to-user-type-doctor">
                                    <i class="bi bi-arrow-left me-1"></i>
                                    العودة
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer mt-auto py-3">
        <div class="container">
            <div class="row g-3">
                <!-- Brand & Description -->
                <div class="col-lg-4 col-md-6">
                    <h5 class="mb-3">
                        <i class="bi bi-heart-pulse me-2 text-primary"></i>
                        <span id="footer-brand">صحتك | Sahatak</span>
                    </h5>
                    <div class="d-flex gap-3 social-links">
                        <a href="#">
                            <i class="bi bi-facebook fs-5"></i>
                        </a>
                        <a href="#">
                            <i class="bi bi-twitter fs-5"></i>
                        </a>
                        <a href="#">
                            <i class="bi bi-instagram fs-5"></i>
                        </a>
                        <a href="#">
                            <i class="bi bi-linkedin fs-5"></i>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="col-lg-2 col-md-6">
                    <h6 class="mb-3" id="footer-links-title">روابط سريعة</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <a href="#" class="text-muted text-decoration-none" id="footer-about">عن المنصة</a>
                        </li>
                        <li class="mb-2">
                            <a href="#" class="text-muted text-decoration-none" id="footer-services">الخدمات</a>
                        </li>
                    </ul>
                </div>

                <!-- Support -->
                <div class="col-lg-3 col-md-6">
                    <h6 class="mb-3" id="footer-support-title">الدعم والمساعدة</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <a href="#" class="text-muted text-decoration-none" id="footer-help">مركز المساعدة</a>
                        </li>
                        <li class="mb-2">
                            <a href="#" class="text-muted text-decoration-none" id="footer-contact">اتصل بنا</a>
                        </li>
                    </ul>
                </div>

                <!-- Emergency Contact -->
                <div class="col-lg-3 col-md-6 emergency-section">
                    <p class="mb-2 text-danger fw-bold" id="footer-emergency-text">
                        في حالات الطوارئ الطبية
                    </p>
                    <p class="mb-3 text-danger fw-bold fs-6" id="footer-emergency-action">
                        <i class="bi bi-hospital me-2"></i>
                        اذهب إلى أقرب مستشفى طوارئ
                    </p>
                    <p class="mb-0 text-muted small" id="footer-emergency-note">
                        للاستشارات غير العاجلة استخدم المنصة
                    </p>
                </div>
            </div>

            <!-- Bottom Bar -->
            <hr class="my-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0 fw-bold" id="footer-copyright">
                        © 2025 صحتك Sahatak. جميع الحقوق محفوظة.
                    </p>
                    <p class="mb-0 text-muted small mt-1" id="footer-medical-disclaimer">
                        هذه المنصة لا تغني عن زيارة الطبيب في الحالات الطارئة
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5 JavaScript CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    
    <!-- Custom JavaScript -->
    <script src="frontend/assets/js/main.js"></script>
</body>
</html>